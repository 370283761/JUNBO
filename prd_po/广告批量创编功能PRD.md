# 广告投放批量创编功能 PRD

## 一、产品概述

### 1.1 产品背景
广告投放人员在巨量引擎平台进行广告投放时，经常需要创建大量相似的广告计划、广告组和广告创意。传统的单条创建方式效率低下，批量创编功能可以极大提升投放效率。

### 1.2 目标用户
- 广告优化师
- 广告投放运营人员
- 代理商投放团队
- 中大型广告主

### 1.3 核心价值
- **效率提升**：批量创建可节省80%以上的操作时间
- **降低出错率**：模板化操作减少人工填写错误
- **规范投放**：统一的命名和配置规范
- **快速测试**：支持快速创建多版本素材测试

## 二、功能需求

### 2.1 核心功能架构

```
批量创编系统
├── 创建模式选择
│   ├── 从模板创建
│   ├── 从现有广告复制
│   └── 从Excel导入
├── 批量配置
│   ├── 广告计划层级
│   ├── 广告组层级
│   └── 广告创意层级
├── 变量系统
│   ├── 文本变量（城市、产品等）
│   ├── 素材变量（图片、视频）
│   └── 定向变量（人群、地域）
└── 预览与提交
    ├── 批量预览
    ├── 错误检查
    └── 批量提交
```

### 2.2 详细功能说明

#### 2.2.1 创建模式

**模式一：从模板创建**
- 预设常用广告投放模板（效果广告、品牌广告等）
- 用户选择模板后填充变量即可批量生成

**模式二：从现有广告复制**
- 选择已有的优质广告作为基础
- 支持修改部分参数批量复制
- 保留原广告的优化数据标签

**模式三：从Excel导入**
- 下载Excel模板
- 填写广告信息
- 上传文件自动解析创建

#### 2.2.2 批量配置界面

**广告计划层级配置**
- 计划名称规则（支持变量）
- 预算设置（日预算/总预算）
- 投放时间段
- 批量数量设置

**广告组层级配置**
- 广告组名称规则
- 定向设置
  - 地域定向（支持批量选择多个城市）
  - 人群定向（年龄、性别、兴趣等）
  - 行为定向
- 出价策略
- 转化目标

**广告创意层级配置**
- 创意形式（图文、视频、原生等）
- 标题/描述（支持变量替换）
- 素材上传（支持批量上传）
- 落地页设置
- 监测链接

#### 2.2.3 变量系统

**变量类型**
```
{城市}、{产品}、{价格}、{日期}、{序号}
```

**使用场景**
- 广告名称：`{城市}-{产品}推广-{日期}`
- 广告标题：`{城市}{产品}限时优惠，低至{价格}元`
- 创意描述：支持多组变量组合

**变量配置**
- 可视化变量管理面板
- 支持添加、编辑、删除变量
- 变量预览实时更新

#### 2.2.4 批量生成规则

**组合生成逻辑**
- 城市 × 产品 × 素材 = 最终广告数量
- 示例：3个城市 × 5个产品 × 2套素材 = 30条广告

**命名规范**
- 自动生成唯一标识
- 支持自定义命名规则
- 自动添加时间戳

### 2.3 辅助功能

#### 2.3.1 智能检查
- 预算合理性检查
- 定向冲突检测
- 素材规格校验
- 文案敏感词检测

#### 2.3.2 预览功能
- 表格式预览所有将创建的广告
- 支持单条编辑
- 支持删除不需要的组合

#### 2.3.3 保存与复用
- 保存为模板
- 历史记录查看
- 快速复用配置

## 三、用户体验设计

### 3.1 设计原则

1. **渐进式展示**：按照广告层级逐步配置，降低认知负担
2. **所见即所得**：实时预览生成结果
3. **智能提示**：提供配置建议和错误提醒
4. **快速操作**：支持键盘快捷键和批量操作

### 3.2 交互流程

```
Step 1: 选择创建模式
  ↓
Step 2: 配置广告计划
  ↓
Step 3: 配置广告组（定向、出价）
  ↓
Step 4: 配置广告创意（素材、文案）
  ↓
Step 5: 设置变量和生成规则
  ↓
Step 6: 预览与检查
  ↓
Step 7: 批量提交
```

### 3.3 页面布局

**主界面布局（左右分栏）**
```
┌─────────────────────────────────────────────────────┐
│  顶部导航：批量创编 > 配置 > 预览 > 提交            │
├─────────────────────────────────────────────────────┤
│                                                       │
│  ┌─────────────┐  ┌─────────────────────────────┐  │
│  │             │  │                             │  │
│  │  配置面板   │  │       实时预览区            │  │
│  │             │  │                             │  │
│  │  - 计划     │  │   生成数量：30条            │  │
│  │  - 广告组   │  │                             │  │
│  │  - 创意     │  │   [预览表格]                │  │
│  │  - 变量     │  │                             │  │
│  │             │  │                             │  │
│  │             │  │                             │  │
│  │             │  │                             │  │
│  └─────────────┘  └─────────────────────────────┘  │
│                                                       │
│  [上一步]                    [保存草稿] [下一步]     │
└─────────────────────────────────────────────────────┘
```

### 3.4 关键界面设计

#### 界面1：变量配置面板
```
┌─────────────────────────────────────────┐
│  变量管理                    [+ 添加变量] │
├─────────────────────────────────────────┤
│  变量名称    变量值                操作   │
│  ────────────────────────────────────   │
│  {城市}     北京,上海,深圳         [编辑] │
│  {产品}     手机,电脑,平板         [编辑] │
│  {价格}     2999,3999,4999        [编辑] │
│                                          │
│  预览示例：                              │
│  北京-手机推广-2026-01-15                │
│  上海-手机推广-2026-01-15                │
│  深圳-手机推广-2026-01-15                │
└─────────────────────────────────────────┘
```

#### 界面2：批量预览表格
```
┌──────────────────────────────────────────────────────────┐
│  将创建 30 条广告  [全选] [导出] [删除选中]               │
├──────────────────────────────────────────────────────────┤
│ ☑ 计划名称          广告组      创意标题        预算  操作│
│ ☑ 北京-手机-0115   手机组-北京  北京手机优惠    500  [编辑]│
│ ☑ 上海-手机-0115   手机组-上海  上海手机优惠    500  [编辑]│
│ ☑ 深圳-手机-0115   手机组-深圳  深圳手机优惠    500  [编辑]│
│ ...                                                       │
│                                                           │
│ 1-10 共30条                               [上一页][下一页]│
└──────────────────────────────────────────────────────────┘
```

## 四、技术实现要点

### 4.1 前端技术栈
- **框架**：React + TypeScript
- **状态管理**：Redux / Zustand
- **UI组件**：Ant Design / Semi Design
- **表格**：AG-Grid（处理大量数据）
- **表单**：React Hook Form（性能优化）

### 4.2 关键技术点

**性能优化**
- 虚拟滚动处理大量预览数据
- 防抖/节流处理实时预览
- 分批次提交（每批100条）

**数据校验**
- 前端实时校验
- 后端二次校验
- 巨量引擎API参数校验

**错误处理**
- 详细的错误提示
- 支持部分成功场景
- 失败重试机制

### 4.3 API设计

```typescript
// 批量创建广告
POST /api/ad/batch-create
{
  "template_id": "xxx",
  "campaigns": [...],
  "ad_groups": [...],
  "creatives": [...],
  "variables": {...}
}

// 预览生成结果
POST /api/ad/batch-preview
{
  "config": {...}
}

// 保存为模板
POST /api/ad/save-template
{
  "name": "模板名称",
  "config": {...}
}
```

## 五、数据指标

### 5.1 核心指标
- 批量创建成功率
- 平均创建时长
- 单次批量创建数量
- 模板使用率

### 5.2 体验指标
- 页面加载时长
- 操作错误率
- 用户完成率
- 功能使用频率

## 六、风险与对策

### 6.1 风险点
1. **巨量引擎API限流**：单次请求过多被限流
2. **数据一致性**：部分创建成功，部分失败
3. **用户误操作**：批量创建错误广告

### 6.2 对策
1. 分批次提交，控制并发
2. 事务性处理，失败可回滚
3. 二次确认+草稿保存机制

## 七、迭代规划

### V1.0（MVP）
- 基础批量创建功能
- 变量系统
- Excel导入导出

### V2.0
- 智能推荐（基于历史数据）
- 自动优化建议
- A/B测试支持

### V3.0
- AI生成创意文案
- 智能出价建议
- 多平台支持（抖音、快手、小红书）
