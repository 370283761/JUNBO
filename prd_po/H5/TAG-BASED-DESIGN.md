# 基于标签的智能批量创编 - 交互设计方案

## 🎯 设计理念

**核心思想**：从"手工选择数据"转变为"智能标签匹配"

**用户视角**：
- 不需要关心具体有哪些主体、项目、小说
- 只需选择业务标签，系统自动匹配数据
- 标签是动态的，新增数据自动包含在标签内

**业务价值**：
- 效率提升：从选择1000个项目 → 选择3个标签
- 智能化：标签自动包含最新、最优数据
- 可复用：标签可以保存和分享

## 📋 新的完整流程

```
Step 1: 选择主体标签
Step 2: 选择项目标签
Step 3: 选择素材标签
Step 4: 选择小说标���
Step 5: 配置生成规则
Step 6: 预览生成的广告计划列表
Step 7: 确认提交
```

## 🎨 详细交互设计

### Step 1: 选择主体标签

```
┌──────────────────────────────────────────────────��───────────────┐
│ 智能批量创编 - 选择标签            [保存草稿] [下一步]           │
├──────────────────────────────────────────────────────────────────┤
│                                                                    │
│  左侧: 标签选择区 (800px)     │  右侧: 实时预览 (320px, sticky) │
│                                │                                   │
│  ┌─────────────────────────┐  │  ┌────────────────────────────┐ │
│  │ 1️⃣ 选择主体标签 *       │  │  │ 📊 标签匹配预览            │ │
│  │                          │  │  │                             │ │
│  │ 🏷️ 系统标签              │  │  │ 主体标签: 2个              │ │
│  │ ┌─────────────────────┐ │  │  │ 匹配主体: 25个             │ │
│  │ │ ☑ 跑量主体 (30个)   │ │  │  │                             │ │
│  │ │   投放状态=跑量      │ │  │  │ 项目标签: 0个              │ │
│  │ │                      │ │  │  │ 匹配项目: 0个              │ │
│  │ │ ☑ 高转化主体 (15个) │ │  │  │                             │ │
│  │ │   近30天转化>100    │ │  │  │ 素材标签: 0个              │ │
│  │ │                      │ │  │  │ 匹配素材: 0个              │ │
│  │ │ ☐ 新主体 (8个)      │ │  │  │                             │ │
│  │ │   开户<7天          │ │  │  │ 小说标签: 0个              │ │
│  │ │                      │ │  │  │ 匹配小说: 0个              │ │
│  │ │ ☐ 测试主体 (12个)   │ │  │  │                             │ │
│  │ │   投放状态=测试      │ │  │  │ 💡 预计生成                │ │
│  │ └─────────────────────┘ │  │  │                             │ │
│  │                          │  │  │ 🎯 0 条广告计划            │ │
│  │ 🏷️ 我的自定义标签        │  │  │                             │ │
│  │ ┌─────────────────────┐ │  │  │ ⚠️ 请继续选择其他标签      │ │
│  │ │ ☐ 北京地区主体 (5个)│ │  │  └────────────────────────────┘ │
│  │ │ ☐ VIP客户主体 (3个) │ │  │                                   │
│  │ └─────────────────────┘ │  │                                   │
│  │                          │  │                                   │
│  │ [+ 创建新标签]           │  │                                   │
│  └─────────────────────────┘  │                                   │
│                                │                                   │
│  ℹ️ 提示：                     │                                   │
│  • 已选择 2 个主体标签         │                                   │
│  • 实时匹配 25 个主体          │                                   │
│  • 标签会自动包含新增的主体    │                                   │
│                                │                                   │
└──────────────────────────────────────────────────────────────────┘
```

**标签卡片设计**：
```
┌───────────────────────────────┐
│ ☑ 跑量主体                    │  ← 复选框 + 标签名称
│                               │
│ 📊 包含 30 个主体             │  ← 匹配数量
│                               │
│ 筛选规则：                    │  ← 标签规则说明
│ • 投放状态 = 跑量             │
│ • 最近7天有消耗               │
│                               │
│ 💡 自动包含新增数据           │  ← 动态标签提示
│                               │
│ [查看详情] [编辑规则]         │  ← 操作按钮
└───────────────────────────────┘
```

### Step 2: 选择项目标签

```
┌──────────────────────────────────────────────────────────────────┐
│ 2️⃣ 选择项目标签 *                                                │
├──────────────────────────────────────────────────────────────────┤
│                                                                    │
│ 🏷️ 按题材分类                                                     │
│ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐                     │
│ │☑霸道   │ │☐穿越   │ │☐都市   │ │☐古代   │                     │
│ │  总裁  │ │  重生  │ │  言情  │ │  言情  │                     │
│ │        │ │        │ │        │ │        │                     │
│ │ 356个  │ │ 289个  │ │ 421个  │ │ 198个  │                     │
│ └────────┘ └────────┘ └────────┘ └────────┘                     │
│                                                                    │
│ ┌────────┐ ┌────────┐ ┌────────┐                                │
│ │☑玄幻   │ │☐悬疑   │ │☐其他   │                                │
│ │  修仙  │ │  推理  │ │  题材  │                                │
│ │        │ │        │ │        │                                │
│ │ 167个  │ │ 89个   │ │ 124个  │                                │
│ └────────┘ └────────┘ └────────┘                                │
│                                                                    │
│ 🏷️ 按效果分类                                                     │
│ ┌─────────────────────┐ ┌─────────────────────┐                │
│ │ ☑ 高转化项目 (125个)│ │ ☐ 新上线项目 (89个) │                │
│ │   近30天转化率>8%    │ │   上线<15天         │                │
│ └─────────────────────┘ └─────────────────────┘                │
│                                                                    │
│ ┌─────────────────────┐ ┌─────────────────────┐                │
│ │ ☐ 热门项目 (156个)  │ │ ☐ 测试项目 (67个)   │                │
│ │   近7天曝光>100万    │ │   测试阶段          │                │
│ └─────────────────────┘ └─────────────────────┘                │
│                                                                    │
│ 🏷️ 我的自定义标签                                                 │
│ ┌─────────────────────┐ ┌─────────────────────┐                │
│ │ ☐ 重点推广项目      │ │ ☐ 年度重点项目      │                │
│ │   (23个)            │ │   (12个)            │                │
│ └─────────────────────┘ └─────────────────────┘                │
│                                                                    │
│ [+ 创建新标签]                                                     │
│                                                                    │
│ ℹ️ 已选择 2 个项目标签，匹配 481 个项目                           │
└──────────────────────────────────────────────────────────────────┘
```

**按钮式标签卡片**（适合题材分类）：
```
┌──────────┐
│ ☑ 霸道   │  ← 选中状态（蓝色边框+背景）
│   总裁   │
│          │
│  356个   │  ← 包含数量
└──────────┘

┌──────────┐
│ ☐ 穿越   │  ← 未选中状态（灰色边框）
│   重生   │
│          │
│  289个   │
└──────────┘
```

### Step 3: 选择素材标签

```
┌──────────────────────────────────────────────────────────────────┐
│ 3️⃣ 选择素材标签 *                                                │
├──────────────────────────────────────────────────────────────────┤
│                                                                    │
│ 🏷️ 按素材类型                                                     │
│ ┌────────────┐ ┌────────────┐ ┌────────────┐                    │
│ │ ☑ 解压素材 │ │ ☑ 滚屏素材 │ │ ☐ ADX素材  │                    │
│ │            │ │            │ │            │                    │
│ │  12,345个  │ │  8,967个   │ │  5,432个   │                    │
│ │            │ │            │ │            │                    │
│ │ 自动选择   │ │ 自动选择   │ │ 自动选择   │                    │
│ │ 最优素材   │ │ 最优素材   │ │ 最优素材   │                    │
│ └────────────┘ └────────────┘ └────────────┘                    │
│                                                                    │
│ 🏷️ 按效果筛选                                                     │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☑ 高曝光素材 (3,456个)│ │ ☐ 高点击素材 (2,341个)│              │
│ │   近7天曝光量>10万    │ │   点击率>5%           │              │
│ │   [解压] [滚屏] [ADX] │ │   [解压] [滚屏]       │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☐ 新素材 (1,234个)    │ │ ☐ 高转化素材 (876个)  │              │
│ │   上传<3天            │ │   转化率>3%           │              │
│ │   [解压] [滚屏]       │ │   [解压] [滚屏]       │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ 🏷️ 按来源筛选                                                     │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☐ ADX平台素材        │ │ ☐ 自剪辑素材          │              │
│ │   (5,432个)          │ │   (15,678个)          │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ 💡 素材分配策略：                                                  │
│ ┌────────────────────────────────────────────────┐              │
│ │ 系统将根据以下优先级自动分配素材：              │              │
│ │ 1️⃣ 高曝光素材（解压、滚屏）                     │              │
│ │ 2️⃣ 自动去重，避免重复使用                       │              │
│ │ 3️⃣ 优先使用近期效果好的素材                     │              │
│ └────────────────────────────────────────────────┘              │
│                                                                    │
│ ℹ️ 已选择 3 个素材标签，匹配 15,801 个素材                        │
└──────────────────────────────────────────────────────────────────┘
```

### Step 4: 选择小说标签

```
┌──────────────────────────────────────────────────────────────────┐
│ 4️⃣ 选择小说标签 *                                                │
├──────────────────────────────────────────────────────────────────┤
│                                                                    │
│ 🏷️ 按效果分类                                                     │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☑ 爆款小说           │ │ ☐ 高转化小说          │              │
│ │   (234个)            │ │   (156个)             │              │
│ │                      │ │                       │              │
│ │ 近30天:              │ │ 近30天:               │              │
│ │ • 曝光>100万         │ │ • 转化率>5%           │              │
│ │ • 点击率>3%          │ │ • ROI>1.5            │              │
│ │                      │ │                       │              │
│ │ 包含题材:            │ │ 包含题材:             │              │
│ │ 霸道总裁 穿越重生    │ │ 都市言情 霸道总裁     │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☐ 新上架小说         │ │ ☐ 测试小说            │              │
│ │   (189个)            │ │   (67个)              │              │
│ │   上架<7天           │ │   测试阶段            │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ 🏷️ 按题材分类 (与项目标签联动)                                    │
│ ┌───────────────────────────────────────────────┐               │
│ │ 💡 智能推荐：                                  │               │
│ │                                                │               │
│ │ 根据您选择的项目标签 "霸道总裁"、"玄幻修仙"   │               │
│ │ 系统推荐以下小说标签：                         │               │
│ │                                                │               │
│ │ ⭐ 霸道总裁爆款 (89个)        [快速选择]      │               │
│ │ ⭐ 玄幻修仙热门 (67个)        [快速选择]      │               │
│ │ ⭐ 两类混合推荐 (45个)        [快速选择]      │               │
│ └───────────────────────────────────────────────┘               │
│                                                                    │
│ 🏷️ 按作者分类                                                     │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☐ 头部作者作品       │ │ ☐ 新人作者作品        │              │
│ │   (123个)            │ │   (234个)             │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ 🏷️ 我的自定义标签                                                 │
│ ┌──────────────────────┐ ┌──────────────────────┐              │
│ │ ☐ 本月重点推广       │ │ ☐ 年度爆款预测        │              │
│ │   (34个)             │ │   (28个)              │              │
│ └──────────────────────┘ └──────────────────────┘              │
│                                                                    │
│ [+ 创建新标签]                                                     │
│                                                                    │
│ ℹ️ 已选择 1 个小说标签，匹配 234 本小说                           │
└──────────────────────────────────────────────────────────────────┘
```

### Step 5: 配置生成规则

```
┌──────────────────────────────────────────────────────────────────┐
│ 5️⃣ 配置生成规则                                                  │
├──────────────────────────────────────────────────────────────────┤
│                                                                    │
│ 📋 选择规则模板 (推荐)                                             │
│ ┌────────────────────────────────────────────────┐              │
│ │ ⭐ 规则模板1: 全量组合                          │              │
│ │                                                │              │
│ │ 主体 × 项目 × 广告 × 素材 = 全量组合          │              │
│ │                                                │              │
│ │ 根据您选择的标签:                              │              │
│ │ 25主体 × 481项目 × 4广告 × 4素材              │              │
│ │ = 192,400 条广告计划                          │              │
│ │                                                │              │
│ │              [使用此模板]                      │              │
│ └────────────────────────────────────────────────┘              │
│                                                                    │
│ ┌────────────────────────────────────────────────┐              │
│ │ ⭐ 规则模板2: 按账户生成 (推荐)                 │              │
│ │                                                │              │
│ │ 每个账户 N 个广告，自动分配素材                │              │
│ │                                                │              │
│ │ 根据您选择的标签:                              │              │
│ │ • 筛选符合条件的账户: 约125个                  │              │
│ │ • 每账户生成 6 个广告                          │              │
│ │ • 3个解压 + 3个滚屏                            │              │
│ │ = 750 条广告计划                               │              │
│ │                                                │              │
│ │              [使用此模板]                      │              │
│ └────────────────────────────────────────────────┘              │
│                                                                    │
│ 🔧 或自定义规则                                                    │
│ [展开自定义配置]                                                   │
│                                                                    │
└──────────────────────────────────────────────────────────────────┘
```

### Step 6: 预览生成的广告计划列表

```
┌──────────────────────────────────────────────────────────────────┐
│ 6️⃣ 预览生成结果                               [返回修改] [提交]  │
├──────────────────────────────────────────────────────────────────┤
│                                                                    │
│ 📊 生成摘要                                                        │
│ ┌────────────────────────────────────────────────┐              │
│ │ 预计生成: 750 条广告计划                       │              │
│ │                                                │              │
│ │ 基于标签:                                      │              │
│ │ • 主体: 跑量主体(25个) + 高转化主体(15个)      │              │
│ │ • 项目: 霸道总裁(356个) + 玄幻修仙(167个) + ...│              │
│ │ • 素材: 高曝光素材(3456个) + ...               │              │
│ │ • 小说: 爆款小说(234个)                        │              │
│ │                                                │              │
│ │ 生成规则: 按账户生成，每账户6广告              │              │
│ └────────────────────────────────────────────────┘              │
│                                                                    │
│ 📋 广告计划列表 (前100条预览)                                     │
│                                                                    │
│ 筛选: [全部主体▼] [全部项目▼] [全部素材▼] [搜索...]             │
│                                                                    │
│ ┌──────────────────────────────────────────────────────────┐    │
│ │☑│主体    │账户  │项目      │小说        │素材  │广告名称  │    │
│ │─┼────────┼──────┼──────────┼───────────┼──────┼─────────│    │
│ │☑│主体A   │账户1 │项目1-霸总│爆款��说1   │解压  │计划1    │    │
│ │☑│主体A   │账户1 │项目1-霸总│爆款小说1   │滚屏  │计划2    │    │
│ │☑│主体A   │账户1 │项目2-玄幻│爆款小说2   │解压  │计划3    │    │
│ │☑│主体A   │账户2 │项目1-霸总│爆款小说1   │解压  │计划4    │    │
│ │ ... 更多数据 (虚拟滚动，流畅加载)                         │    │
│ │                                                            │    │
│ │ 显示 1-100，共 750 条              [上一页] [下一页]      │    │
│ └──────────────────────────────────────────────────────────┘    │
│                                                                    │
│ 💡 智能检查                                                        │
│ ┌────────────────────────────────────────────────┐              │
│ │ ✅ 数据完整性检查通过                          │              │
│ │ ✅ 无重复广告计划                              │              │
│ │ ⚠️  发现 3 个小说缺少封面，建议补充            │              │
│ │ ℹ️  预估消耗: 约 37,500 元/天                  │              │
│ └────────────────────────────────────────────────┘              │
│                                                                    │
│ 批量操作: [全选] [反选] [删除选中] [导出Excel]                   │
│                                                                    │
│               [← 返回修改标签]  [✅ 确认提交创建]                 │
└──────────────────────────────────────────────────────────────────┘
```

## 🎯 关键交互细节

### 1. 标签卡片的三种展示形式

#### 形式1：详细卡片（适合复杂标签）
```
┌───────────────────────────────┐
│ ☑ 跑量主体                    │
│                               │
│ 📊 包含 30 个主体             │
│                               │
│ 筛选规则：                    │
│ • 投放状态 = 跑量             │
│ • 最近7天有消耗               │
│ • 账户余额 > 1000元           │
│                               │
│ 💡 自动包含新增数据           │
│ 📅 更新时间: 2分钟前          │
│                               │
│ [查看详情] [编辑规则]         │
└───────────────────────────────┘
```

#### 形式2：按钮式卡片（适合简单分类）
```
┌──────────┐
│ ☑ 霸道   │
│   总裁   │
│          │
│  356个   │
└──────────┘
```

#### 形式3：行内标签（适合多选场景）
```
┌──────────────────────────────────┐
│ ☑ 解压素材 (12,345个)           │
└──────────────────────────────────┘
```

### 2. 智能推荐机制

**标签联动推荐**：
```
┌───────────────────────────────────────┐
│ 💡 智能推荐                            │
│                                        │
│ 您选择了 "霸道总裁" 项目标签           │
│ 系统推荐以下小说标签：                 │
│                                        │
│ ⭐ 霸道总裁爆款 (89个)  [快速选择]    │
│ ⭐ 同题材高转化 (67个)  [快速选择]    │
│                                        │
│ 🔥 其他用户也选择了：                 │
│ • 都市言情小说 (23人选择)             │
│ • 穿越重生小说 (18人选择)             │
└───────────────────────────────────────┘
```

### 3. 实时预览反馈

**右侧Sticky面板实时更新**：
```
┌────────────────────────────┐
│ 📊 标签匹配预览            │
│                             │
│ 主体标签: 2个              │
│ ├─ 跑量主体: 30个          │
│ └─ 高转化主体: 15个        │
│ 合计匹配: 25个主体 ✓       │
│ (已去重)                    │
│                             │
│ 项目标签: 2个              │
│ ├─ 霸道总裁: 356个         │
│ └─ 玄幻修仙: 167个         │
│ 合计匹配: 523个项目 ✓      │
│                             │
│ 素材标签: 1个              │
│ ├─ 高曝光素材: 3,456个     │
│ 合计匹配: 3,456个素材 ✓    │
│                             │
│ 小说标签: 1个              │
│ ├─ 爆款小说: 234个         │
│ 合计匹配: 234本小说 ✓      │
│                             │
│ ━━━━━━━━━━━━━━━━━━━━━━━  │
│                             │
│ 💡 预计生成                │
│                             │
│ 🎯 待配置规则              │
│                             │
│ ⚠️ 请在下一步配置生成规则  │
└────────────────────────────┘
```

### 4. 标签管理功能

**创建自定义标签**：
```
┌─────────────────────────────────────┐
│ 创建新标签                   [×]   │
├─────────────────────────────────────┤
│                                      │
│ 标签名称:                            │
│ [北京地区VIP客户主体            ]   │
│                                      │
│ 标签类型:                            │
│ ◉ 主体标签                          │
│ ○ 项目标签                          │
│ ○ 素材标签                          │
│ ○ 小说标签                          │
│                                      │
│ 筛选条件:                            │
│ ┌─────────────────────────────┐    │
│ │ [地区    ▼] [等于▼] [北京  ]│    │
│ │ [客户类型▼] [等于▼] [VIP   ]│    │
│ │ [状态    ▼] [等于▼] [跑量  ]│    │
│ └─────────────────────────────┘    │
│                                      │
│ [+ 添加条件]                         │
│                                      │
│ 📊 匹配结果: 5个主体                │
│                                      │
│ ☑ 自动包含新增数据                  │
│ ☑ 与团队成员共享                    │
│                                      │
│          [取消]  [保存标签]          │
└─────────────────────────────────────┘
```

## 🔧 技术实现

### 标签数据结构
```javascript
{
  id: 'TAG001',
  name: '跑量主体',
  type: 'subject', // subject, project, material, book
  category: 'system', // system, custom
  rules: [
    { field: 'status', operator: '==', value: 'running' },
    { field: 'consumption', operator: '>', value: 0, days: 7 }
  ],
  matchCount: 30, // 匹配数量
  updateTime: '2026-01-16T10:00:00',
  dynamic: true, // 是否动态包含新数据
  shared: false // 是否共享
}
```

### 标签匹配引擎
```javascript
class TagMatchEngine {
  // 根据标签规则匹配数据
  match(tag, dataSource) {
    return dataSource.filter(item => {
      return tag.rules.every(rule => {
        return this.evaluateRule(item, rule);
      });
    });
  }

  // 计算所有选中标签的总匹配结果（去重）
  calculateTotal(selectedTags, dataSource) {
    const allMatches = new Set();

    selectedTags.forEach(tag => {
      const matches = this.match(tag, dataSource);
      matches.forEach(item => allMatches.add(item.id));
    });

    return Array.from(allMatches).map(id =>
      dataSource.find(item => item.id === id)
    );
  }
}
```

## 📊 优势对比

| 维度 | 原方案（选择具体数据） | 新方案（选择标签） |
|------|----------------------|-------------------|
| 操作步骤 | 搜索+逐个选择1000次 | 选择3个标签 |
| 时间成本 | 约10分钟 | 约30秒 |
| 学习成本 | 需要了解所有数据 | 只需理解标签含义 |
| 可复用性 | 低，每次重新选择 | 高，标签可保存 |
| 动态性 | 静态，新数据需手动添加 | 动态，自动包含新数据 |
| 错误率 | 高，易遗漏 | 低，系统自动匹配 |

## 🎉 总结

基于标签的设计方案：
- ✅ **效率提升10倍**：从选择1000次 → 选择5个标签
- ✅ **智能化**：系统自动匹配最优数据
- ✅ **动态更新**：新增数据自动包含
- ✅ **可复用**：标签可保存、共享、复用
- ✅ **易学习**：标签语义化，降低理解成本
