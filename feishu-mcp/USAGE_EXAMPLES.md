# 飞书 MCP 使用示例与最佳实践

本文档提供详细的使用示例，帮助您充分发挥飞书 MCP Server 的能力。

## 目录

- [基础操作](#基础操作)
- [文档处理](#文档处理)
- [批量操作](#批量操作)
- [知识库管理](#知识库管理)
- [高级应用](#高级应用)
- [最佳实践](#最佳实践)

## 基础操作

### 1. 读取单个文档

**示例 1：读取并总结**

```
请读取这个飞书文档并总结主要内容：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

**示例 2：提取特定信息**

```
从这个飞书文档中提取以下信息：
- 项目背景
- 核心目标
- 关键里程碑

文档链接：https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

**示例 3：结构化输出**

```
请读取这个产品需求文档，并按以下格式整理：

# 需求概述
- 需求名称：
- 优先��：
- 目标用户：

# 功能点清单
1.
2.
3.

文档链接：https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

### 2. 搜索文档

**示例 1：关键词搜索**

```
在我的飞书文档中搜索包含"API 设计"的所有文档
```

**示例 2：跨文档搜索**

```
在文件夹 <folder_token> 中搜索所有提到"性能优化"的文档，
并列出相关段落
```

### 3. 列出文档

**示例 1：列出文件夹内容**

```
请列出文件夹 <folder_token> 中的所有文档，
包括文档名称、创建时间和最后修改时间
```

**示例 2：过滤文档**

```
列出最近一周内修改过的所有产品需求文档
```

## 文档处理

### 1. 格式转换

**示例 1：转换为 Markdown**

```
请将这个飞书文档转换为 Markdown 格式：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

要求：
- 保留标题层级
- 保留表格格式
- 保留代码块
```

**示例 2：导出为纯文本**

```
将这个飞书文档导出为纯文本格式，去除所有格式：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

**示例 3：生成 PDF 目录**

```
基于这个飞书文档的标题结构，生成一个 PDF 目录：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

### 2. 内容提取

**示例 1：提取表格数据**

```
从这个飞书文档中提取所有表格，
并转换为 CSV 格式：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

**示例 2：提取代码片段**

```
从这个技术文档中提取所有代码示例，
按编程语言分类整理：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

**示例 3：提取任务清单**

```
从这个会议纪要中提取所有待办事项，
格式化为 TODO 列表：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

### 3. 内容分析

**示例 1：关键词提取**

```
分析这个飞书文档，提取 10 个最重要的关键词：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

**示例 2：摘要生成**

```
为这个长文档生成一个 300 字的摘要：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

要求：
- 突出核心观点
- 保留关键数据
- 逻辑清晰
```

**示例 3：文档评分**

```
评估这个产品需求文档的完整性，
从以下维度打分（1-10）：
- 需求背景
- 目标用户
- 功能描述
- 验收标准
- 风险评估

文档链接：https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

## 批量操作

### 1. 批量读取

**示例 1：对比多个文档**

```
请对比以下三个版本的需求文档，总结主要变化：
1. V1.0: https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
2. V2.0: https://xxx.feishu.cn/docx/doxcnyyyyyyyyyyyyyyy
3. V3.0: https://xxx.feishu.cn/docx/doxcnzzzzzzzzzzzzzz
```

**示例 2：批量摘要**

```
为文件夹 <folder_token> 中的所有文档生成摘要，
输出为表格格式：

| 文档名称 | 摘要 | 关键词 |
|---------|------|--------|
```

### 2. 批量分析

**示例 1：项目文档统计**

```
分析项目文件夹 <folder_token> 中的所有文档，统计：
- 文档总数
- 文档类型分布（需求、设计、技术方案等）
- 平均文档长度
- 最后更新时间分布
```

**示例 2：知识图谱构建**

```
基于文件夹 <folder_token> 中的所有技术文档，
构建一个知识图谱，展示：
- 核心概念
- 概念之间的关系
- 引用链接
```

### 3. 批量转换

**示例 1：批量导出**

```
将文件夹 <folder_token> 中所有的会议纪要
导出为 Markdown 格式，保存到本地
```

**示例 2：批量格式化**

```
统一文件夹 <folder_token> 中所有需求文档的格式：
- 添加文档信息表头
- 统一标题层级
- 规范化术语
```

## 知识库管理

### 1. 浏览知识库

**示例 1：查看知识库结构**

```
展示知识库 <wiki_id> 的完整目录结构，
以树状图形式呈现
```

**示例 2：搜索知识库**

```
在技术文档知识库中搜索关于"缓存策略"的所有文章
```

### 2. 知识库内容整理

**示例 1：生成索引**

```
为知识库 <wiki_id> 生成一个完整的索引，
包括：
- 分类
- 文档标题
- 文档链接
- 简短描述
```

**示例 2：知识库质量评估**

```
评估技术文档知识库 <wiki_id> 的质量：
- 文档完整性
- 内容更新频率
- 分类合理性
- 建议改进方向
```

## 高级应用

### 1. 文档智能问答

**示例 1：基于文档回答问题**

```
基于这个技术方案文档：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

回答以下问题：
1. 采用的是什么架构模式？
2. 如何保证系统的可扩展性？
3. 有哪些潜在风险？
```

**示例 2：多文档综合问答**

```
基于以下三个文档：
- 需求文档: https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
- 设计文档: https://xxx.feishu.cn/docx/doxcnyyyyyyyyyyyyyyy
- 测试方案: https://xxx.feishu.cn/docx/doxcnzzzzzzzzzzzzzz

回答：这个项目的端到端流程是什么？
```

### 2. 文档生成

**示例 1：生成技术文档**

```
基于这个需求文档：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

生成一份技术方案文档，包括：
- 系统架构
- 数据模型
- 接口设计
- 技术选型
```

**示例 2：生成测试用例**

```
根据这个功能需求文档：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

生成完整的测试用例，覆盖：
- 正常流程
- 异常情况
- 边界条件
```

### 3. 文档协作

**示例 1：评审反馈整理**

```
从这个文档的评论中提取所有反馈意见：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

整理为：
- 问题类型
- 反馈人
- 具体建议
- 优先级
```

**示例 2：变更追踪**

```
对比这个文档的历史版本，
生成变更日志：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

### 4. 与现有工具集成

**示例 1：结合 Python 工具**

```
使用飞书 MCP 读取文档内容，
然后调用现有的 quanyi/feishu_to_prd.py 工具
进一步处理，生成标准化 PRD
```

**示例 2：数据流水线**

```
1. 从飞书知识库读取所有技术文档
2. 提取关键信息
3. 生成 JSON 格式的知识库
4. 导入到 Elasticsearch 进行索引
```

## 最佳实践

### 1. 文档链接管理

**推荐做法**：

```
# 创建文档链接映射表
文档类型 | 文档名称 | 链接
-------|---------|-----
PRD | 用户管理需求 | https://xxx.feishu.cn/docx/abc
技术方案 | 用户管理实现 | https://xxx.feishu.cn/docx/def
测试用例 | 用户管理测试 | https://xxx.feishu.cn/docx/ghi

# 在提示词中引用
"请读取用户管理需求文档（链接见上方映射表）"
```

### 2. 批量操作优化

**推荐做法**：

```
# 分批处理大量文档
请分批处理文件夹中的文档，每批 10 个：
1. 第一批：文档 1-10
2. 第二批：文档 11-20
...

每批完成后暂停，等待确认后继续
```

### 3. 结构化输出

**推荐做法**：

```
# 使用明确的输出格式
请按以下 JSON 格式输出文档摘要：

{
  "title": "文档标题",
  "summary": "摘要内容",
  "keywords": ["关键词1", "关键词2"],
  "categories": ["分类1"],
  "last_modified": "2026-01-20"
}
```

### 4. 错误处理

**推荐做法**：

```
# 请求时说明容错需求
请读取以下文档列表，如果某个文档无法访问，
跳过并继续处理其他文档：

1. https://xxx.feishu.cn/docx/abc
2. https://xxx.feishu.cn/docx/def
3. https://xxx.feishu.cn/docx/ghi

最后汇总处理结果和跳过的文档
```

### 5. 权限管理

**推荐做法**：

- ✅ 定期检查应用权限
- ✅ 及时将应用添加到新文档
- ✅ 使用应用访问凭证（tenant）而非用户凭证
- ✅ 定期轮换 App Secret

### 6. 性能优化

**推荐做法**：

```
# 对于大文档，分段处理
这是一个很长的文档，请分三次处理：
1. 第一次：读取前 1/3 的内容
2. 第二次：读取中间 1/3 的内容
3. 第三次：读取最后 1/3 的内容
最后整合分析结果

文档链接：https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx
```

## 实用提示词模板

### 模板 1：文档摘要

```
请为以下飞书文档生成摘要：

📄 文档链接：[链接]

📋 输出要求：
- 字数：200-300字
- 格式：
  * 核心要点（3-5条）
  * 关键数据
  * 行动建议

🎯 目标读者：[管理层/技术团队/产品团队]
```

### 模板 2：文档对比

```
请对比以下版本的文档，分析主要变化：

📄 文档列表：
- V1：[链接1]
- V2：[链接2]
- V3：[链接3]

📊 对比维度：
- 新增内容
- 删除内容
- 修改内容
- 影响评估

📋 输出格式：Markdown 表格
```

### 模板 3：知识提取

```
从这个飞书文档中提取知识点：

📄 文档链接：[链接]

🎯 提取目标：
- 核心概念及定义
- 操作步骤
- 最佳实践
- 注意事项

📋 输出格式：结构化 JSON
```

## 故障排查示例

### 问题 1：文档读取失败

**提示词**：

```
我在尝试读取飞书文档时遇到错误：
https://xxx.feishu.cn/docx/doxcnxxxxxxxxxxxxxx

请帮我：
1. 验证文档链接格式是否正确
2. 检查可能的权限问题
3. 提供替代方案
```

### 问题 2：批量操作超时

**提示词**：

```
批量处理 50 个文档时遇到超时，
请帮我设计一个分批处理方案：

- 每批处理多少个文档？
- 批次之间如何衔接？
- 如何处理失败的文档？
```

## 参考资源

- [飞书应用配置指南](FEISHU_APP_SETUP.md)
- [Claude Desktop 配置指南](CLAUDE_DESKTOP_SETUP.md)
- [Feishu-MCP GitHub](https://github.com/cso1z/Feishu-MCP)
- [Model Context Protocol 文档](https://modelcontextprotocol.io/)

---

**提示**：这些示例可以根据您的实际需求进行调整和组合。随着使用经验的积累，您会发现更多高效的使用方式。
